<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, VRGallery</title>
    <meta name="description" content="Hello, VRGallery">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>

    <script>
      
AFRAME.registerShader('my-custom', {
  schema: {
    tex: {type: 'map', is: 'uniform'}
  },
          raw: false,
          vertexShader:
        `
          varying vec2 vUV;

          void main(void) {
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            vUV = uv;
          }
        `
        ,
          fragmentShader: 
        `
          precision mediump float;
          uniform sampler2D tex;
          varying vec2 vUV;

          void main () {

            vec3 color = texture2D(tex,vUV).rgb;
            gl_FragColor = vec4(color, 1.0);
          }
        `
});

    </script>

  </head>
  <body>
    <a-scene stats = "true" background="color: #FAFAFA" antialias="true">

      <a-assets>
        <a-asset-item id="gallery_walls" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/gallery_walls.obj"></a-asset-item>
        <a-asset-item id="gallery_ceiling" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/gallery_ceiling.obj"></a-asset-item>
        <a-asset-item id="gallery_model" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/gallery_model.obj"></a-asset-item>
        <a-asset-item id="gallery_emit" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/gallery_emit.obj"></a-asset-item>

        <a-asset-item id="gallery" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/gallery.glb"></a-asset-item>
        <img id="texture1" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/lightmap_ceiling.png" crossorigin="anonymous">
        <img id="texture2" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/lightmap_model.png" crossorigin="anonymous">
        <img id="texture3" src="https://raw.githubusercontent.com/martinsh/vr-gallery/master/models/lightmap_walls.png" crossorigin="anonymous">
      </a-assets>
      
          <!-- Camera -->
    <a-entity camera
              look-controls
              wasd-controls
              position="0 1.5 5"></a-entity>

      <a-entity
          geometry="primitive: plane; width: 2; height: 2;" rotation="-90 0 0" position="0 0.1 -3"
          material="shader:my-custom; tex:#texture2 " ></a-entity>

      <a-entity 
          obj-model="obj: #gallery_walls" position="0 0 0"
          material="shader:my-custom; tex:#texture3 "></a-entity>
      
      <a-entity 
          obj-model="obj: #gallery_ceiling" position="0 0 0"
          material="shader:my-custom; tex:#texture1 "></a-entity>
      
      <a-entity 
          obj-model="obj: #gallery_model" position="0 0 0"
          material="shader:my-custom; tex:#texture2 "></a-entity>
      
      <a-entity 
          obj-model="obj: #gallery_emit" position="0 0 0"
          material="shader:flat;  "></a-entity>
      
    </a-scene>
  </body>
</html>